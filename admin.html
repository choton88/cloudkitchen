<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard ‚Äì Sagnik Cloud Kitchin</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #f4f4f4;
    }
    header {
      background: #8b0000;
      color: white;
      padding: 15px 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h2 { margin: 0; }
    button {
      padding: 8px 14px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
    }
    .logout {
      background: black;
      color: white;
    }
    .container {
      padding: 25px;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h3 { margin-top: 0; color:#8b0000; }
    input, select {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    th { background:#f0f0f0; }
    .status-pending { color: orange; font-weight:bold; }
    .status-preparing { color: blue; font-weight:bold; }
    .status-delivered { color: green; font-weight:bold; }
    .add-btn {
      background:#25D366;
      color:white;
      margin-top:10px;
    }
  </style>
</head>
<body>

<header>
  <h2>üì¶ Admin Dashboard</h2>
  <button class="logout" onclick="logout()">Logout</button>
</header>

<div class="container">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div style="max-width:400px;margin:40px auto;">
  <h3 style="text-align:center;">Orders Per Day</h3>
  <canvas id="orderChart"></canvas>
</div>

<!-- Menu Manager -->
<div class="card">
  <h3>üçΩÔ∏è Menu Manager</h3>

  <input id="mName" placeholder="Item Name" />
  <input id="mPrice" placeholder="Price (‚Çπ)" />
  <input id="mImg" placeholder="Image filename (example: paneer.jpg)" />

  <button class="add-btn" onclick="addMenu()">Add Menu Item</button>

  <table style="margin-top:15px;">
    <thead>
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th>Image</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="menuTable"></tbody>
  </table>
</div>

  <!-- Add Order -->
  <div class="card">
    <h3>Add New Order / Enquiry</h3>
    <input id="name" placeholder="Customer Name" />
    <input id="phone" placeholder="Phone Number" />
    <input id="details" placeholder="Order / Enquiry Details" />
    <select id="status">
      <option>Pending</option>
      <option>Preparing</option>
      <option>Delivered</option>
    </select>
    <button class="add-btn" onclick="addOrder()">Add</button>
  </div>

  <!-- Orders List -->
  <div class="card">
    <h3>Order & Enquiry List</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Details</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="orderTable"></tbody>
    </table>
  </div>

</div>

<script>
let menu = JSON.parse(localStorage.getItem('menu')) || [];

function renderMenu(){
  const t = document.getElementById('menuTable');
  t.innerHTML = '';
  menu.forEach((m,i) => {
    t.innerHTML += `
      <tr>
        <td>${m.name}</td>
        <td>‚Çπ${m.price}</td>
        <td>${m.img}</td>
        <td><button onclick="delMenu(${i})">‚ùå</button></td>
      </tr>
    `;
  });
  localStorage.setItem('menu', JSON.stringify(menu));
}

function addMenu(){
  if(!mName.value || !mPrice.value) return alert('Fill all fields');

  menu.push({
    id: Date.now(),
    name: mName.value,
    price: mPrice.value,
    img: mImg.value
  });

  mName.value = mPrice.value = mImg.value = '';
  renderMenu();
}

function delMenu(i){
  if(confirm('Delete this item?')){
    menu.splice(i,1);
    renderMenu();
  }
}

renderMenu();
  // security check
  if(localStorage.getItem('adminLoggedIn') !== 'yes'){
    window.location.href = 'index.html';
  }
  let orders = JSON.parse(localStorage.getItem('orders')) || [];
  function render(){
    const table = document.getElementById('orderTable');
    table.innerHTML = '';
    orders.forEach(o => {
      const cls = o.status === 'Pending' ? 'status-pending' : o.status === 'Preparing' ? 'status-preparing' : 'status-delivered';
      table.innerHTML += `
        <tr>
          <td>${o.name}</td>
          <td>${o.phone}</td>
          <td>${o.details}</td>
          <td class="${cls}">${o.status}</td>
        </tr>`;
    });
    localStorage.setItem('orders', JSON.stringify(orders));
  }

  function addOrder(){
    const o = {
      name: name.value,
      phone: phone.value,
      details: details.value,
      status: status.value
    };

    if(!o.name || !o.phone) return alert('Name & phone required');
    
    orders.push(o);
    render();
   

    name.value = phone.value = details.value = '';
  }

  function logout(){
    localStorage.removeItem('adminLoggedIn');
    window.location.href = 'index.html';
  }

  render();

/* DEMO DATA (replace with real order data later) */

const ordersPerDay = {
  Monday: 12,
  Tuesday: 18,
  Wednesday: 10,
  Thursday: 22,
  Friday: 30,
  Saturday: 40,
  Sunday: 25
};

const ctx = document.getElementById('orderChart').getContext('2d');

new Chart(ctx, {
  type: 'pie',
  data: {
    labels: Object.keys(ordersPerDay),
    datasets: [{
      data: Object.values(ordersPerDay),
      backgroundColor: [
        '#8b0000',
        '#ff9800',
        '#4caf50',
        '#03a9f4',
        '#9c27b0',
        '#e91e63',
        '#607d8b'
      ]
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        position: 'bottom'
      }
    }
  }
});
</script>


</body>
</html>
